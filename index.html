<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task-Management</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        .task-item {
            transition: all 0.3s ease;
        }
    
        .task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    
        .completed-task {
            background-color: #0d1e13;
            border-left: 4px solid #092c20;
        }
    
        .active-task {
            
            background-color: #0d1e13;
            border-left: 4px solid #092c20;
        }
    
        .task-completed {
            text-decoration: line-through;
            color: #6b7280;
        }
    
        .priority-high {
            border-left: 4px solid #7a3a3a;
        }
    
        .priority-medium {
            border-left: 4px solid #453416;
        }
    
        .priority-low {
            border-left: 4px solid #152642;
        }
    </style>
</head>

<body class="font-sans bg-black min-h-screen">
    <header class="bg-gray-900 shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                
                <h1 class="text-2xl font-bold text-amber-600">TaskFlow</h1>
            </div>
            <div class="flex justify-between items-center space-x-8">
                <span class="text-amber-600 font-semibold text-md"><i>An Easy and Professional Task Task-Management App</i></span>
            </div>
        </div>
    </header>
    <main class="container mx-auto px-4 py-8">
        <!--status part-->
        <section>
            <div class="flex flex-cols-3 justify-between items-center gap-12 mb-6">
                <div class="w-80 h-32 rounded-lg p-3 bg-gray-900 shadow-lg sm: p-4 border border-gray-700">
                    <div class="text-xl sm:text-2xl font-bold text-white" id="totalTasks">0</div>
                    <div class="text-xs font-semibold text-blue-400 sm:text-sm">Total Tasks</div>
                </div>
                <div class="w-80 h-32 rounded-lg p-3 bg-gray-900 shadow-lg sm: p-4 border border-gray-700">
                    <div class="text-xl sm:text-2xl font-bold text-white" id="activeTasks">0</div>
                    <div class="text-xs font-semibold text-amber-600 sm:text-sm">Active Tasks</div>
                </div>
                <div class="w-80 h-32 rounded-lg p-3 bg-gray-900 shadow-lg sm: p-4 border border-gray-700">
                    <div class="text-xl sm:text-2xl font-bold text-white" id="completed">0</div>
                    <div class="text-xs font-semibold text-green-500 sm:text-sm">Completed</div>
                </div>
            </div>
        </section>
        <!--Add task input form-->
            <div class="flex flex-cols-1 lg:flex-cols-4 gap-8">
                <div class="lg:col-span-3">
                    <div class="bg-gray-900 rounded-lg shadow-lg p-6 top-6">
                        <h2 class="text-xl font-bold text-amber-600 mb-6">Add New Tasks</h2>
                        <form id="task-form" class="space-y-4">
                            <div>
                                <label for="task-name" class="block text-sm font-medium text-white mb-1">Task Name</label>
                                <input type="text" id="task-name" class="w-full text-gray-400 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 ring-indigo-500 border-indigo-500"
                                placeholder="Enter task name" required>
                            </div>
                            <div>
                                <label for="due-date" class="block text-sm font-medium text-white mb-1">Due Date</label>
                                <input type="date" id="due-date" class="w-full text-gray-400 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 ring-indigo-500 border-indigo-500">
                            </div>
                            <div>
                                <label for="task-priority" class="block text-sm font-medium text-white mb-1">Priority</label>
                                <select id="task-priority" class="w-full text-gray-400 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </div>
                            <button type="submit" class="w-full bg-indigo-900 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition duration-200 flex items-center justify-center">Add Task</button>
                        </form>
                    </div>
                </div>
                <!--tasks list part and it's navigation-->
                <div class="w-full lg:col-span-6">
                    <div class="bg-gray-900 rounded-lg shadow-lg">
                        <div class="p-6 border-gray-300">
                            <div class="flex flex-col md:flex-row justify-between items-end">
                                <h2 class="text-xl font-bold text-amber-600">My Tasks</h2>
                                <div class="flex flex-wrap gap-2">
                                    <button id="filter-all" class="px-4 py-2 bg-indigo-900 text-white rounded-lg text-sm font-medium">All</button>
                                    <button id="filter-active" class="px-4 py-2 bg-indigo-900 text-white rounded-lg text-sm font-medium">Active</button>
                                    <button id="filter-completed" class="px-4 py-2 bg-indigo-900 text-white rounded-lg text-sm font-medium">Completed</button>
                                    <select id="sort-tasks" class="px-4 py-2 bg-indigo-900 text-white rounded-lg text-sm font-medium">
                                        <option value="dueDate">Sort by Due Date</option>
                                        <option value="name">Sort by Name</option>
                                        <option value="priority">Sort by Priority</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="task-list" class="p-4 space-y-4 text-white">
                            <!--tasks will enter dynamically-->
                        </div>
                    </div>
                </div>
            </div>
    </main>
    <!-- Edit Task Modal -->
    <div id="edit-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md mx-4 fade-in">
            <div class="p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">Edit Task</h3>
                <form id="edit-form">
                    <input type="hidden" id="edit-id">
                    <div class="space-y-4">
                        <div>
                            <label for="edit-name" class="block text-sm font-medium text-gray-700 mb-1">Task
                                Name</label>
                            <input type="text" id="edit-name"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                required>
                        </div>
                        <div>
                            <label for="edit-due-date" class="block text-sm font-medium text-gray-700 mb-1">Due
                                Date</label>
                            <input type="date" id="edit-due-date"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="edit-priority" class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
                            <select id="edit-priority"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="low">Low</option>
                                <option value="medium">Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-6 flex justify-end space-x-3">
                        <button type="button" id="cancel-edit"
                            class="px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition duration-200">Cancel</button>
                        <button type="submit"
                            class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition duration-200">Save
                            Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Task class - represents a single task
        class Task {
            constructor(id, name, dueDate, priority, status = 'active') {
                this.id = id;
                this.name = name;
                this.dueDate = dueDate;
                this.priority = priority;
                this.status = status;
            }
            toggleStatus() {
                this.status = this.status === 'completed' ? 'active' : 'completed';
            }
            update(name, dueDate, priority) {
                this.name = name;
                this.dueDate = dueDate;
                this.priority = priority;
            }
            getPriorityClass() {
                switch (this.priority) {
                    case 'high': return 'priority-high';
                    case 'medium': return 'priority-medium';
                    case 'low': return 'priority-low';
                    default: return 'priority-low';
                }
            }
            getPriorityColor() {
                switch (this.priority) {
                    case 'high': return 'bg-red-900 text-white';
                    case 'medium': return 'bg-amber-900 text-white';
                    case 'low': return 'bg-blue-900 text-white';
                    default: return 'bg-blue-700 text-white';
                }
            }
        }

        // TaskManager class - manages all tasks
        class TaskManager {
            constructor() {
                this.tasks = [
                    new Task(1, "completed assignment", "2025-09-15", "high", "completed"),
                    new Task(2, "Game project", "2025-11-20", "medium", "active"),
                    new Task(3, "Internship Application", "2025-10-12", "medium", "active"),
                    new Task(4, "shopping", "2025-10-18", "low", "active"),
                    new Task(5, "Certified test", "2025-09-22", "high", "completed")
                ];
                this.taskIdCounter = 6;
                this.currentFilter = 'all';
                this.currentSort = 'dueDate';
            }
            addTask(name, dueDate, priority) {
                const newTask = new Task(this.taskIdCounter++, name, dueDate, priority);
                this.tasks.push(newTask);
            }
            findTask(id) {
                return this.tasks.find(task => task.id === id);
            }

            deleteTask(id) {
                this.tasks = this.tasks.filter(task => task.id !== id);
            }
            getFilteredTasks() {
                if (this.currentFilter === 'active') {
                    return this.tasks.filter(task => task.status === 'active');
                } else if (this.currentFilter === 'completed') {
                    return this.tasks.filter(task => task.status === 'completed');
                }
                return this.tasks;
            }
            sortTasks(tasksToSort) {
                return tasksToSort.sort((a, b) => {
                    switch (this.currentSort) {
                        case 'name':
                            return a.name.localeCompare(b.name);
                        case 'priority':
                            const priorityOrder = { 'high': 3, 'medium': 2, 'low': 1 };
                            return priorityOrder[b.priority] - priorityOrder[a.priority];
                        case 'dueDate':
                        default:
                            if (!a.dueDate && !b.dueDate) return 0;
                            if (!a.dueDate) return 1;
                            if (!b.dueDate) return -1;
                            return new Date(a.dueDate) - new Date(b.dueDate);
                    }
                });
            }
            getCounts() {
                return {
                    total: this.tasks.length,
                    active: this.tasks.filter(task => task.status === 'active').length,
                    completed: this.tasks.filter(task => task.status === 'completed').length
                };
            }
            setFilter(filter) {
                this.currentFilter = filter;
            }
            setSort(sort) {
                this.currentSort = sort;
            }
        }

        // UI class - handles all displays
        class TaskUI {
            constructor(taskManager) {
                this.taskManager = taskManager;
            }

            // Initialize the UI
            init() {
                // Add event listeners
                document.getElementById('task-form').addEventListener('submit', (e) => this.handleAddTask(e));
                document.getElementById('edit-form').addEventListener('submit', (e) => this.handleEditTask(e));
                document.getElementById('cancel-edit').addEventListener('click', () => this.closeEditModal());

                // Filter buttons
                document.getElementById('filter-all').addEventListener('click', () => this.handleFilter('all'));
                document.getElementById('filter-active').addEventListener('click', () => this.handleFilter('active'));
                document.getElementById('filter-completed').addEventListener('click', () => this.handleFilter('completed'));
                
                document.getElementById('sort-tasks').addEventListener('change', (e) => this.handleSort(e));
                document.getElementById('edit-modal').addEventListener('click', (e) => {
                    if (e.target === document.getElementById('edit-modal')) {
                        this.closeEditModal();
                    }
                });

                // Initial render
                this.render();
            }

            // Handle adding a task
            handleAddTask(event) {
                event.preventDefault();

                const name = document.getElementById('task-name').value.trim();
                const dueDate = document.getElementById('due-date').value;
                const priority = document.getElementById('task-priority').value;

                if (!name) return;

                this.taskManager.addTask(name, dueDate, priority);
                document.getElementById('task-form').reset();
                this.render();
            }

            // Handle filter change
            handleFilter(filter) {
                this.taskManager.setFilter(filter);

                // Update button styles
                document.querySelectorAll('[id^="filter-"]').forEach(btn => {
                    btn.classList.remove('bg-amber-600');
                    btn.classList.add('bg-indigo-900');
                });
                document.getElementById(`filter-${filter}`).classList.remove('bg-indigo-900');
                document.getElementById(`filter-${filter}`).classList.add('bg-amber-600');

                this.render();
            }
            handleSort(event) {
                this.taskManager.setSort(event.target.value);
                this.render();
            }
            handleToggleStatus(id) {
                const task = this.taskManager.findTask(id);
                if (task) {
                    task.toggleStatus();
                    this.render();
                }
            }
            handleDeleteTask(id) {
                if (window.confirm('Are you sure you want to delete this task?')) {
                    this.taskManager.deleteTask(id);
                    this.render();
                }
            }
            handleEditTaskClick(id) {
                const task = this.taskManager.findTask(id);
                if (task) {
                    document.getElementById('edit-id').value = task.id;
                    document.getElementById('edit-name').value = task.name;
                    document.getElementById('edit-due-date').value = task.dueDate;
                    document.getElementById('edit-priority').value = task.priority;
                    document.getElementById('edit-modal').classList.remove('hidden');
                }
            }

            // Handle saving edited task
            handleEditTask(event) {
                event.preventDefault();

                const id = parseInt(document.getElementById('edit-id').value);
                const name = document.getElementById('edit-name').value.trim();
                const dueDate = document.getElementById('edit-due-date').value;
                const priority = document.getElementById('edit-priority').value;

                if (!name) return;

                const task = this.taskManager.findTask(id);
                if (task) {
                    task.update(name, dueDate, priority);
                    this.closeEditModal();
                    this.render();
                }
            }

            // Close edit modal
            closeEditModal() {
                document.getElementById('edit-modal').classList.add('hidden');
            }

            // Create HTML for a single task
            createTaskElement(task) {
                const taskDiv = document.createElement('div');
                taskDiv.className = `task-item bg-gray-800 rounded-lg p-4 border-l-4 ${task.getPriorityClass()} ${task.status === 'completed' ? 'completed-task' : task.status === 'active' ? 'active-task' : ''}`;
                taskDiv.setAttribute('data-id', task.id);

                const dueDateText = task.dueDate ? new Date(task.dueDate).toLocaleDateString() : 'No due date';
                const priorityColor = task.getPriorityColor();

                taskDiv.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h3 class="font-semibold text-lg ${task.status === 'completed' ? 'task-completed' : 'text-white'}">${task.name}</h3>
                            <div class="flex items-center space-x-4 mt-2">
                                <span class="text-sm text-gray-400">Due: ${dueDateText}</span>
                                <span class="text-sm px-2 py-1 rounded-full ${priorityColor}">${task.priority.toLowerCase()}</span>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button onclick="app.ui.handleToggleStatus(${task.id})" class="px-3 py-1 text-sm rounded-lg ${task.status === 'completed' ? 'bg-amber-900 text-white' : 'bg-green-600 text-white'} hover:opacity-80 transition duration-200">
                                ${task.status === 'completed' ? 'Undo' : 'Complete'}
                            </button>
                            <button onclick="app.ui.handleEditTaskClick(${task.id})" class="px-3 py-1 text-sm bg-indigo-900 text-white rounded-lg hover:bg-indigo-900 transition duration-200">Edit</button>
                            <button onclick="app.ui.handleDeleteTask(${task.id})" class="px-3 py-1 text-sm bg-red-900 text-white rounded-lg hover:bg-red-900 transition duration-200">Delete</button>
                        </div>
                    </div>
                `;

                return taskDiv;
            }

            // Update status counters
            updateStatusCounters() {
                const counts = this.taskManager.getCounts();
                document.getElementById('totalTasks').textContent = counts.total;
                document.getElementById('activeTasks').textContent = counts.active;
                document.getElementById('completed').textContent = counts.completed;
            }

            // Render all tasks
            render() {
                const taskList = document.getElementById('task-list');
                taskList.innerHTML = '';

                const filteredTasks = this.taskManager.getFilteredTasks();
                const sortedTasks = this.taskManager.sortTasks([...filteredTasks]);

                if (sortedTasks.length === 0) {
                    taskList.innerHTML = '<div class="text-center text-gray-400 py-8">No tasks found</div>';
                } else {
                    sortedTasks.forEach(task => {
                        taskList.appendChild(this.createTaskElement(task));
                    });
                }

                this.updateStatusCounters();
            }
        }

        // App class - brings everything together
        class App {
            constructor() {
                this.taskManager = new TaskManager();
                this.ui = new TaskUI(this.taskManager);
            }

            // Start the application
            start() {
                this.ui.init();
            }
        }

        let app;
        document.addEventListener('DOMContentLoaded', function () {
            app = new App();
            app.start();
        });
    </script>
</body>

</html>